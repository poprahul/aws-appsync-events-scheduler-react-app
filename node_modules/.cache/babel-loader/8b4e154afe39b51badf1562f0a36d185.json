{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ValidationContext = undefined;\nexports.validate = validate;\n\nvar _invariant = require('../jsutils/invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _error = require('../error');\n\nvar _visitor = require('../language/visitor');\n\nvar _kinds = require('../language/kinds');\n\nvar Kind = _interopRequireWildcard(_kinds);\n\nvar _schema = require('../type/schema');\n\nvar _TypeInfo = require('../utilities/TypeInfo');\n\nvar _specifiedRules = require('./specifiedRules');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\n/**\n * Implements the \"Validation\" section of the spec.\n *\n * Validation runs synchronously, returning an array of encountered errors, or\n * an empty array if no errors were encountered and the document is valid.\n *\n * A list of specific validation rules may be provided. If not provided, the\n * default list of rules defined by the GraphQL specification will be used.\n *\n * Each validation rules is a function which returns a visitor\n * (see the language/visitor API). Visitor methods are expected to return\n * GraphQLErrors, or Arrays of GraphQLErrors when invalid.\n *\n * Optionally a custom TypeInfo instance may be provided. If not provided, one\n * will be created from the provided schema.\n */\n\n\nfunction validate(schema, ast, rules, typeInfo) {\n  !schema ? (0, _invariant2.default)(0, 'Must provide schema') : void 0;\n  !ast ? (0, _invariant2.default)(0, 'Must provide document') : void 0;\n  !(schema instanceof _schema.GraphQLSchema) ? (0, _invariant2.default)(0, 'Schema must be an instance of GraphQLSchema. Also ensure that there are ' + 'not multiple versions of GraphQL installed in your node_modules directory.') : void 0;\n  return visitUsingRules(schema, typeInfo || new _TypeInfo.TypeInfo(schema), ast, rules || _specifiedRules.specifiedRules);\n}\n/**\n * This uses a specialized visitor which runs multiple visitors in parallel,\n * while maintaining the visitor skip and break API.\n *\n * @internal\n */\n\n\nfunction visitUsingRules(schema, typeInfo, documentAST, rules) {\n  var context = new ValidationContext(schema, documentAST, typeInfo);\n  var visitors = rules.map(function (rule) {\n    return rule(context);\n  }); // Visit the whole document with each instance of all provided rules.\n\n  (0, _visitor.visit)(documentAST, (0, _visitor.visitWithTypeInfo)(typeInfo, (0, _visitor.visitInParallel)(visitors)));\n  return context.getErrors();\n}\n/**\n * An instance of this class is passed as the \"this\" context to all validators,\n * allowing access to commonly useful contextual information from within a\n * validation rule.\n */\n\n\nvar ValidationContext = exports.ValidationContext = function () {\n  function ValidationContext(schema, ast, typeInfo) {\n    _classCallCheck(this, ValidationContext);\n\n    this._schema = schema;\n    this._ast = ast;\n    this._typeInfo = typeInfo;\n    this._errors = [];\n    this._fragmentSpreads = new Map();\n    this._recursivelyReferencedFragments = new Map();\n    this._variableUsages = new Map();\n    this._recursiveVariableUsages = new Map();\n  }\n\n  ValidationContext.prototype.reportError = function reportError(error) {\n    this._errors.push(error);\n  };\n\n  ValidationContext.prototype.getErrors = function getErrors() {\n    return this._errors;\n  };\n\n  ValidationContext.prototype.getSchema = function getSchema() {\n    return this._schema;\n  };\n\n  ValidationContext.prototype.getDocument = function getDocument() {\n    return this._ast;\n  };\n\n  ValidationContext.prototype.getFragment = function getFragment(name) {\n    var fragments = this._fragments;\n\n    if (!fragments) {\n      this._fragments = fragments = this.getDocument().definitions.reduce(function (frags, statement) {\n        if (statement.kind === Kind.FRAGMENT_DEFINITION) {\n          frags[statement.name.value] = statement;\n        }\n\n        return frags;\n      }, Object.create(null));\n    }\n\n    return fragments[name];\n  };\n\n  ValidationContext.prototype.getFragmentSpreads = function getFragmentSpreads(node) {\n    var spreads = this._fragmentSpreads.get(node);\n\n    if (!spreads) {\n      spreads = [];\n      var setsToVisit = [node];\n\n      while (setsToVisit.length !== 0) {\n        var set = setsToVisit.pop();\n\n        for (var i = 0; i < set.selections.length; i++) {\n          var selection = set.selections[i];\n\n          if (selection.kind === Kind.FRAGMENT_SPREAD) {\n            spreads.push(selection);\n          } else if (selection.selectionSet) {\n            setsToVisit.push(selection.selectionSet);\n          }\n        }\n      }\n\n      this._fragmentSpreads.set(node, spreads);\n    }\n\n    return spreads;\n  };\n\n  ValidationContext.prototype.getRecursivelyReferencedFragments = function getRecursivelyReferencedFragments(operation) {\n    var fragments = this._recursivelyReferencedFragments.get(operation);\n\n    if (!fragments) {\n      fragments = [];\n      var collectedNames = Object.create(null);\n      var nodesToVisit = [operation.selectionSet];\n\n      while (nodesToVisit.length !== 0) {\n        var _node = nodesToVisit.pop();\n\n        var spreads = this.getFragmentSpreads(_node);\n\n        for (var i = 0; i < spreads.length; i++) {\n          var fragName = spreads[i].name.value;\n\n          if (collectedNames[fragName] !== true) {\n            collectedNames[fragName] = true;\n            var fragment = this.getFragment(fragName);\n\n            if (fragment) {\n              fragments.push(fragment);\n              nodesToVisit.push(fragment.selectionSet);\n            }\n          }\n        }\n      }\n\n      this._recursivelyReferencedFragments.set(operation, fragments);\n    }\n\n    return fragments;\n  };\n\n  ValidationContext.prototype.getVariableUsages = function getVariableUsages(node) {\n    var usages = this._variableUsages.get(node);\n\n    if (!usages) {\n      var newUsages = [];\n      var typeInfo = new _TypeInfo.TypeInfo(this._schema);\n      (0, _visitor.visit)(node, (0, _visitor.visitWithTypeInfo)(typeInfo, {\n        VariableDefinition: function VariableDefinition() {\n          return false;\n        },\n        Variable: function Variable(variable) {\n          newUsages.push({\n            node: variable,\n            type: typeInfo.getInputType()\n          });\n        }\n      }));\n      usages = newUsages;\n\n      this._variableUsages.set(node, usages);\n    }\n\n    return usages;\n  };\n\n  ValidationContext.prototype.getRecursiveVariableUsages = function getRecursiveVariableUsages(operation) {\n    var usages = this._recursiveVariableUsages.get(operation);\n\n    if (!usages) {\n      usages = this.getVariableUsages(operation);\n      var fragments = this.getRecursivelyReferencedFragments(operation);\n\n      for (var i = 0; i < fragments.length; i++) {\n        Array.prototype.push.apply(usages, this.getVariableUsages(fragments[i]));\n      }\n\n      this._recursiveVariableUsages.set(operation, usages);\n    }\n\n    return usages;\n  };\n\n  ValidationContext.prototype.getType = function getType() {\n    return this._typeInfo.getType();\n  };\n\n  ValidationContext.prototype.getParentType = function getParentType() {\n    return this._typeInfo.getParentType();\n  };\n\n  ValidationContext.prototype.getInputType = function getInputType() {\n    return this._typeInfo.getInputType();\n  };\n\n  ValidationContext.prototype.getFieldDef = function getFieldDef() {\n    return this._typeInfo.getFieldDef();\n  };\n\n  ValidationContext.prototype.getDirective = function getDirective() {\n    return this._typeInfo.getDirective();\n  };\n\n  ValidationContext.prototype.getArgument = function getArgument() {\n    return this._typeInfo.getArgument();\n  };\n\n  return ValidationContext;\n}();","map":{"version":3,"sources":["/Users/poprahul/workspace/frontend/amplify-apps/calandarApp/aws-mobile-appsync-events-starter-react/node_modules/graphql/validation/validate.js"],"names":["Object","defineProperty","exports","value","ValidationContext","undefined","validate","_invariant","require","_invariant2","_interopRequireDefault","_error","_visitor","_kinds","Kind","_interopRequireWildcard","_schema","_TypeInfo","_specifiedRules","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","default","_classCallCheck","instance","Constructor","TypeError","schema","ast","rules","typeInfo","GraphQLSchema","visitUsingRules","TypeInfo","specifiedRules","documentAST","context","visitors","map","rule","visit","visitWithTypeInfo","visitInParallel","getErrors","_ast","_typeInfo","_errors","_fragmentSpreads","Map","_recursivelyReferencedFragments","_variableUsages","_recursiveVariableUsages","reportError","error","push","getSchema","getDocument","getFragment","name","fragments","_fragments","definitions","reduce","frags","statement","kind","FRAGMENT_DEFINITION","create","getFragmentSpreads","node","spreads","get","setsToVisit","length","set","pop","i","selections","selection","FRAGMENT_SPREAD","selectionSet","getRecursivelyReferencedFragments","operation","collectedNames","nodesToVisit","_node","fragName","fragment","getVariableUsages","usages","newUsages","VariableDefinition","Variable","variable","type","getInputType","getRecursiveVariableUsages","Array","apply","getType","getParentType","getFieldDef","getDirective","getArgument"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ValidationContext = undefined;\nexports.validate = validate;\n\nvar _invariant = require('../jsutils/invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _error = require('../error');\n\nvar _visitor = require('../language/visitor');\n\nvar _kinds = require('../language/kinds');\n\nvar Kind = _interopRequireWildcard(_kinds);\n\nvar _schema = require('../type/schema');\n\nvar _TypeInfo = require('../utilities/TypeInfo');\n\nvar _specifiedRules = require('./specifiedRules');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * Copyright (c) 2015-present, Facebook, Inc.\n                                                                                                                                                           *\n                                                                                                                                                           * This source code is licensed under the MIT license found in the\n                                                                                                                                                           * LICENSE file in the root directory of this source tree.\n                                                                                                                                                           *\n                                                                                                                                                           * \n                                                                                                                                                           */\n\n/**\n * Implements the \"Validation\" section of the spec.\n *\n * Validation runs synchronously, returning an array of encountered errors, or\n * an empty array if no errors were encountered and the document is valid.\n *\n * A list of specific validation rules may be provided. If not provided, the\n * default list of rules defined by the GraphQL specification will be used.\n *\n * Each validation rules is a function which returns a visitor\n * (see the language/visitor API). Visitor methods are expected to return\n * GraphQLErrors, or Arrays of GraphQLErrors when invalid.\n *\n * Optionally a custom TypeInfo instance may be provided. If not provided, one\n * will be created from the provided schema.\n */\nfunction validate(schema, ast, rules, typeInfo) {\n  !schema ? (0, _invariant2.default)(0, 'Must provide schema') : void 0;\n  !ast ? (0, _invariant2.default)(0, 'Must provide document') : void 0;\n  !(schema instanceof _schema.GraphQLSchema) ? (0, _invariant2.default)(0, 'Schema must be an instance of GraphQLSchema. Also ensure that there are ' + 'not multiple versions of GraphQL installed in your node_modules directory.') : void 0;\n  return visitUsingRules(schema, typeInfo || new _TypeInfo.TypeInfo(schema), ast, rules || _specifiedRules.specifiedRules);\n}\n\n/**\n * This uses a specialized visitor which runs multiple visitors in parallel,\n * while maintaining the visitor skip and break API.\n *\n * @internal\n */\nfunction visitUsingRules(schema, typeInfo, documentAST, rules) {\n  var context = new ValidationContext(schema, documentAST, typeInfo);\n  var visitors = rules.map(function (rule) {\n    return rule(context);\n  });\n  // Visit the whole document with each instance of all provided rules.\n  (0, _visitor.visit)(documentAST, (0, _visitor.visitWithTypeInfo)(typeInfo, (0, _visitor.visitInParallel)(visitors)));\n  return context.getErrors();\n}\n\n/**\n * An instance of this class is passed as the \"this\" context to all validators,\n * allowing access to commonly useful contextual information from within a\n * validation rule.\n */\nvar ValidationContext = exports.ValidationContext = function () {\n  function ValidationContext(schema, ast, typeInfo) {\n    _classCallCheck(this, ValidationContext);\n\n    this._schema = schema;\n    this._ast = ast;\n    this._typeInfo = typeInfo;\n    this._errors = [];\n    this._fragmentSpreads = new Map();\n    this._recursivelyReferencedFragments = new Map();\n    this._variableUsages = new Map();\n    this._recursiveVariableUsages = new Map();\n  }\n\n  ValidationContext.prototype.reportError = function reportError(error) {\n    this._errors.push(error);\n  };\n\n  ValidationContext.prototype.getErrors = function getErrors() {\n    return this._errors;\n  };\n\n  ValidationContext.prototype.getSchema = function getSchema() {\n    return this._schema;\n  };\n\n  ValidationContext.prototype.getDocument = function getDocument() {\n    return this._ast;\n  };\n\n  ValidationContext.prototype.getFragment = function getFragment(name) {\n    var fragments = this._fragments;\n    if (!fragments) {\n      this._fragments = fragments = this.getDocument().definitions.reduce(function (frags, statement) {\n        if (statement.kind === Kind.FRAGMENT_DEFINITION) {\n          frags[statement.name.value] = statement;\n        }\n        return frags;\n      }, Object.create(null));\n    }\n    return fragments[name];\n  };\n\n  ValidationContext.prototype.getFragmentSpreads = function getFragmentSpreads(node) {\n    var spreads = this._fragmentSpreads.get(node);\n    if (!spreads) {\n      spreads = [];\n      var setsToVisit = [node];\n      while (setsToVisit.length !== 0) {\n        var set = setsToVisit.pop();\n        for (var i = 0; i < set.selections.length; i++) {\n          var selection = set.selections[i];\n          if (selection.kind === Kind.FRAGMENT_SPREAD) {\n            spreads.push(selection);\n          } else if (selection.selectionSet) {\n            setsToVisit.push(selection.selectionSet);\n          }\n        }\n      }\n      this._fragmentSpreads.set(node, spreads);\n    }\n    return spreads;\n  };\n\n  ValidationContext.prototype.getRecursivelyReferencedFragments = function getRecursivelyReferencedFragments(operation) {\n    var fragments = this._recursivelyReferencedFragments.get(operation);\n    if (!fragments) {\n      fragments = [];\n      var collectedNames = Object.create(null);\n      var nodesToVisit = [operation.selectionSet];\n      while (nodesToVisit.length !== 0) {\n        var _node = nodesToVisit.pop();\n        var spreads = this.getFragmentSpreads(_node);\n        for (var i = 0; i < spreads.length; i++) {\n          var fragName = spreads[i].name.value;\n          if (collectedNames[fragName] !== true) {\n            collectedNames[fragName] = true;\n            var fragment = this.getFragment(fragName);\n            if (fragment) {\n              fragments.push(fragment);\n              nodesToVisit.push(fragment.selectionSet);\n            }\n          }\n        }\n      }\n      this._recursivelyReferencedFragments.set(operation, fragments);\n    }\n    return fragments;\n  };\n\n  ValidationContext.prototype.getVariableUsages = function getVariableUsages(node) {\n    var usages = this._variableUsages.get(node);\n    if (!usages) {\n      var newUsages = [];\n      var typeInfo = new _TypeInfo.TypeInfo(this._schema);\n      (0, _visitor.visit)(node, (0, _visitor.visitWithTypeInfo)(typeInfo, {\n        VariableDefinition: function VariableDefinition() {\n          return false;\n        },\n        Variable: function Variable(variable) {\n          newUsages.push({ node: variable, type: typeInfo.getInputType() });\n        }\n      }));\n      usages = newUsages;\n      this._variableUsages.set(node, usages);\n    }\n    return usages;\n  };\n\n  ValidationContext.prototype.getRecursiveVariableUsages = function getRecursiveVariableUsages(operation) {\n    var usages = this._recursiveVariableUsages.get(operation);\n    if (!usages) {\n      usages = this.getVariableUsages(operation);\n      var fragments = this.getRecursivelyReferencedFragments(operation);\n      for (var i = 0; i < fragments.length; i++) {\n        Array.prototype.push.apply(usages, this.getVariableUsages(fragments[i]));\n      }\n      this._recursiveVariableUsages.set(operation, usages);\n    }\n    return usages;\n  };\n\n  ValidationContext.prototype.getType = function getType() {\n    return this._typeInfo.getType();\n  };\n\n  ValidationContext.prototype.getParentType = function getParentType() {\n    return this._typeInfo.getParentType();\n  };\n\n  ValidationContext.prototype.getInputType = function getInputType() {\n    return this._typeInfo.getInputType();\n  };\n\n  ValidationContext.prototype.getFieldDef = function getFieldDef() {\n    return this._typeInfo.getFieldDef();\n  };\n\n  ValidationContext.prototype.getDirective = function getDirective() {\n    return this._typeInfo.getDirective();\n  };\n\n  ValidationContext.prototype.getArgument = function getArgument() {\n    return this._typeInfo.getArgument();\n  };\n\n  return ValidationContext;\n}();"]},"metadata":{},"sourceType":"script"}