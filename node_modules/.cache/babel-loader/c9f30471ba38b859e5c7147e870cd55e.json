{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createOffline = exports.offline = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _redux = require(\"redux\");\n\nvar _middleware = require(\"./middleware\");\n\nvar _updater = require(\"./updater\");\n\nvar _config = require(\"./config\");\n\nvar _actions = require(\"./actions\");\n\nvar _offlineActionTracker = _interopRequireDefault(require(\"./offlineActionTracker\"));\n/* global $Shape */\n// @TODO: Take createStore as config?\n\n\nvar warnIfNotReduxAction = function warnIfNotReduxAction(config, key) {\n  var maybeAction = config[key];\n  var isNotReduxAction = maybeAction === null || (0, _typeof2.default)(maybeAction) !== 'object' || typeof maybeAction.type !== 'string' || maybeAction.type === '';\n\n  if (isNotReduxAction && console.warn) {\n    var msg = \"\".concat(key, \" must be a proper redux action, \") + \"i.e. it must be an object and have a non-empty string type. \" + \"Instead you provided: \".concat(JSON.stringify(maybeAction, null, 2));\n    console.warn(msg);\n  }\n};\n\nvar offline = function offline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (createStore) {\n    return function (reducer, preloadedState) {\n      var enhancer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (x) {\n        return x;\n      };\n      var config = (0, _config.applyDefaults)(userConfig);\n      warnIfNotReduxAction(config, 'defaultCommit');\n      warnIfNotReduxAction(config, 'defaultRollback'); // toggle experimental returned promises\n\n      config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n      delete config.returnPromises; // wraps userland reducer with a top-level\n      // reducer that handles offline state updating\n\n      var offlineReducer = (0, _updater.enhanceReducer)(reducer, config); // $FlowFixMe\n\n      var offlineMiddleware = (0, _redux.applyMiddleware)((0, _middleware.createOfflineMiddleware)(config)); // create autoRehydrate enhancer if required\n\n      var offlineEnhancer = config.persist && config.rehydrate && config.persistAutoRehydrate ? (0, _redux.compose)(offlineMiddleware, config.persistAutoRehydrate()) : offlineMiddleware; // create store\n\n      var store = offlineEnhancer(createStore)(offlineReducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store); // $FlowFixMe\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n};\n\nexports.offline = offline;\n\nvar createOffline = function createOffline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var config = (0, _config.applyDefaults)(userConfig); // toggle experimental returned promises\n\n  config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n  delete config.returnPromises;\n  warnIfNotReduxAction(config, 'defaultCommit');\n  warnIfNotReduxAction(config, 'defaultRollback');\n\n  var enhanceStore = function enhanceStore(next) {\n    return function (reducer, preloadedState, enhancer) {\n      // create autoRehydrate enhancer if required\n      var createStore = config.persist && config.rehydrate && config.persistAutoRehydrate ? config.persistAutoRehydrate()(next) : next; // create store\n\n      var store = createStore(reducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store);\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n\n  return {\n    middleware: (0, _middleware.createOfflineMiddleware)(config),\n    enhanceReducer: function enhanceReducer(reducer) {\n      return (0, _updater.enhanceReducer)(reducer, config);\n    },\n    enhanceStore: enhanceStore\n  };\n};\n\nexports.createOffline = createOffline;","map":{"version":3,"sources":["/Users/poprahul/workspace/frontend/amplify-apps/calandarApp/aws-mobile-appsync-events-starter-react/node_modules/@redux-offline/redux-offline/lib/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","createOffline","offline","_typeof2","_redux","_middleware","_updater","_config","_actions","_offlineActionTracker","warnIfNotReduxAction","config","key","maybeAction","isNotReduxAction","default","type","console","warn","msg","concat","JSON","stringify","userConfig","arguments","length","undefined","createStore","reducer","preloadedState","enhancer","x","applyDefaults","offlineActionTracker","returnPromises","withPromises","withoutPromises","offlineReducer","enhanceReducer","offlineMiddleware","applyMiddleware","createOfflineMiddleware","offlineEnhancer","persist","rehydrate","persistAutoRehydrate","compose","store","baseReplaceReducer","replaceReducer","bind","nextReducer","persistOptions","persistCallback","detectNetwork","online","dispatch","networkStatusChanged","enhanceStore","next","middleware"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createOffline = exports.offline = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _redux = require(\"redux\");\n\nvar _middleware = require(\"./middleware\");\n\nvar _updater = require(\"./updater\");\n\nvar _config = require(\"./config\");\n\nvar _actions = require(\"./actions\");\n\nvar _offlineActionTracker = _interopRequireDefault(require(\"./offlineActionTracker\"));\n\n/* global $Shape */\n// @TODO: Take createStore as config?\nvar warnIfNotReduxAction = function warnIfNotReduxAction(config, key) {\n  var maybeAction = config[key];\n  var isNotReduxAction = maybeAction === null || (0, _typeof2.default)(maybeAction) !== 'object' || typeof maybeAction.type !== 'string' || maybeAction.type === '';\n\n  if (isNotReduxAction && console.warn) {\n    var msg = \"\".concat(key, \" must be a proper redux action, \") + \"i.e. it must be an object and have a non-empty string type. \" + \"Instead you provided: \".concat(JSON.stringify(maybeAction, null, 2));\n    console.warn(msg);\n  }\n};\n\nvar offline = function offline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (createStore) {\n    return function (reducer, preloadedState) {\n      var enhancer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (x) {\n        return x;\n      };\n      var config = (0, _config.applyDefaults)(userConfig);\n      warnIfNotReduxAction(config, 'defaultCommit');\n      warnIfNotReduxAction(config, 'defaultRollback'); // toggle experimental returned promises\n\n      config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n      delete config.returnPromises; // wraps userland reducer with a top-level\n      // reducer that handles offline state updating\n\n      var offlineReducer = (0, _updater.enhanceReducer)(reducer, config); // $FlowFixMe\n\n      var offlineMiddleware = (0, _redux.applyMiddleware)((0, _middleware.createOfflineMiddleware)(config)); // create autoRehydrate enhancer if required\n\n      var offlineEnhancer = config.persist && config.rehydrate && config.persistAutoRehydrate ? (0, _redux.compose)(offlineMiddleware, config.persistAutoRehydrate()) : offlineMiddleware; // create store\n\n      var store = offlineEnhancer(createStore)(offlineReducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store); // $FlowFixMe\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n};\n\nexports.offline = offline;\n\nvar createOffline = function createOffline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var config = (0, _config.applyDefaults)(userConfig); // toggle experimental returned promises\n\n  config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n  delete config.returnPromises;\n  warnIfNotReduxAction(config, 'defaultCommit');\n  warnIfNotReduxAction(config, 'defaultRollback');\n\n  var enhanceStore = function enhanceStore(next) {\n    return function (reducer, preloadedState, enhancer) {\n      // create autoRehydrate enhancer if required\n      var createStore = config.persist && config.rehydrate && config.persistAutoRehydrate ? config.persistAutoRehydrate()(next) : next; // create store\n\n      var store = createStore(reducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store);\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n\n  return {\n    middleware: (0, _middleware.createOfflineMiddleware)(config),\n    enhanceReducer: function enhanceReducer(reducer) {\n      return (0, _updater.enhanceReducer)(reducer, config);\n    },\n    enhanceStore: enhanceStore\n  };\n};\n\nexports.createOffline = createOffline;"]},"metadata":{},"sourceType":"script"}