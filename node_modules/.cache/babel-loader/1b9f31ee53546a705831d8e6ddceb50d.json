{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport { ApolloLink, Observable } from 'apollo-link';\nexport var setContext = function (setter) {\n  return new ApolloLink(function (operation, forward) {\n    var request = __rest(operation, []);\n\n    return new Observable(function (observer) {\n      var handle;\n      Promise.resolve(request).then(function (req) {\n        return setter(req, operation.getContext());\n      }).then(operation.setContext).then(function () {\n        handle = forward(operation).subscribe({\n          next: observer.next.bind(observer),\n          error: observer.error.bind(observer),\n          complete: observer.complete.bind(observer)\n        });\n      }).catch(observer.error.bind(observer));\n      return function () {\n        if (handle) handle.unsubscribe();\n      };\n    });\n  });\n};","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;AAAA,SACE,UADF,EAEE,UAFF,QAMO,aANP;AAaA,OAAO,IAAM,UAAU,GAAG,UAAC,MAAD,EAAsB;AAC9C,SAAA,IAAI,UAAJ,CAAe,UAAC,SAAD,EAAuB,OAAvB,EAAwC;AACrD,QAAQ,OAAA,GAAA,MAAA,CAAA,SAAA,EAAA,EAAA,CAAR;;AAEA,WAAO,IAAI,UAAJ,CAAe,UAAA,QAAA,EAAQ;AAC5B,UAAI,MAAJ;AACA,MAAA,OAAO,CAAC,OAAR,CAAgB,OAAhB,EACG,IADH,CACQ,UAAA,GAAA,EAAG;AAAI,eAAA,MAAM,CAAC,GAAD,EAAM,SAAS,CAArB,UAAY,EAAN,CAAN;AAAmC,OADlD,EAEG,IAFH,CAEQ,SAAS,CAAC,UAFlB,EAGG,IAHH,CAGQ,YAAA;AACJ,QAAA,MAAM,GAAG,OAAO,CAAC,SAAD,CAAP,CAAmB,SAAnB,CAA6B;AACpC,UAAA,IAAI,EAAE,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,QAAnB,CAD8B;AAEpC,UAAA,KAAK,EAAE,QAAQ,CAAC,KAAT,CAAe,IAAf,CAAoB,QAApB,CAF6B;AAGpC,UAAA,QAAQ,EAAE,QAAQ,CAAC,QAAT,CAAkB,IAAlB,CAAuB,QAAvB;AAH0B,SAA7B,CAAT;AAKD,OATH,EAUG,KAVH,CAUS,QAAQ,CAAC,KAAT,CAAe,IAAf,CAAoB,QAApB,CAVT;AAYA,aAAO,YAAA;AACL,YAAI,MAAJ,EAAY,MAAM,CAAC,WAAP;AACb,OAFD;AAGD,KAjBM,CAAP;AAkBD,GArBD,CAAA;AAqBE,CAtBG","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport { ApolloLink, Observable, } from 'apollo-link';\nexport var setContext = function (setter) {\n    return new ApolloLink(function (operation, forward) {\n        var request = __rest(operation, []);\n        return new Observable(function (observer) {\n            var handle;\n            Promise.resolve(request)\n                .then(function (req) { return setter(req, operation.getContext()); })\n                .then(operation.setContext)\n                .then(function () {\n                handle = forward(operation).subscribe({\n                    next: observer.next.bind(observer),\n                    error: observer.error.bind(observer),\n                    complete: observer.complete.bind(observer),\n                });\n            })\n                .catch(observer.error.bind(observer));\n            return function () {\n                if (handle)\n                    handle.unsubscribe();\n            };\n        });\n    });\n};\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}