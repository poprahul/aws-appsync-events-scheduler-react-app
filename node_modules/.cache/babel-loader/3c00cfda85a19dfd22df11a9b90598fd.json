{"ast":null,"code":"var _jsxFileName = \"/Users/poprahul/workspace/frontend/amplify-apps/calandarApp/aws-mobile-appsync-events-starter-react/src/Components/AllEvents.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { graphql, compose, withApollo } from \"react-apollo\";\nimport QueryAllEvents from \"../GraphQL/QueryAllEvents\";\nimport MutationDeleteEvent from \"../GraphQL/MutationDeleteEvent\";\nimport moment from \"moment\";\n\nclass AllEvents extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      busy: false\n    };\n\n    this.handleSync = async () => {\n      const {\n        client\n      } = this.props;\n      const query = QueryAllEvents;\n      this.setState({\n        busy: true\n      });\n      await client.query({\n        query,\n        fetchPolicy: 'network-only'\n      });\n      this.setState({\n        busy: false\n      });\n    };\n\n    this.renderEvent = event => /*#__PURE__*/React.createElement(Link, {\n      to: `/event/${event.id}`,\n      className: \"card\",\n      key: event.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }\n    }, event.name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon calendar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 20\n      }\n    }), moment(event.when).format('LL')), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon clock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 20\n      }\n    }), moment(event.when).format('LT')), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon marker\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 20\n      }\n    }), event.where)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon info circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 46\n      }\n    }), event.description)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"extra content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon comment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }), \" \", event.comments.items.length, \" comments\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ui bottom attached button\",\n      onClick: this.handleDeleteClick.bind(this, event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"trash icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }), \"Delete\"));\n  }\n\n  async handleDeleteClick(event, e) {\n    e.preventDefault();\n\n    if (window.confirm(`Are you sure you want to delete event ${event.id}`)) {\n      const {\n        deleteEvent\n      } = this.props;\n      await deleteEvent(event);\n    }\n  }\n\n  render() {\n    const {\n      busy\n    } = this.state;\n    const {\n      events\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui clearing basic segment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"ui header left floated\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, \"All Events\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ui icon left basic button\",\n      onClick: this.handleSync,\n      disabled: busy,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      \"aria-hidden\": \"true\",\n      className: `refresh icon ${busy && \"loading\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 25\n      }\n    }), \"Sync with Server\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui link cards\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/newEvent\",\n      className: \"new-event content center aligned\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon add massive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    }, \"Create new event\"))), [].concat(events).sort((a, b) => a.when.localeCompare(b.when)).map(this.renderEvent)));\n  }\n\n}\n\nAllEvents.defaultProps = {\n  events: [],\n  deleteEvent: () => null\n};\nexport default withApollo(compose(graphql(QueryAllEvents, {\n  options: {\n    fetchPolicy: 'cache-first'\n  },\n  props: ({\n    data: {\n      listEvents = {\n        items: []\n      }\n    }\n  }) => ({\n    events: listEvents.items\n  })\n}), graphql(MutationDeleteEvent, {\n  options: {\n    update: (proxy, {\n      data: {\n        deleteEvent\n      }\n    }) => {\n      const query = QueryAllEvents;\n      const data = proxy.readQuery({\n        query\n      });\n      data.listEvents.items = data.listEvents.items.filter(event => event.id !== deleteEvent.id);\n      proxy.writeQuery({\n        query,\n        data\n      });\n    }\n  },\n  props: props => ({\n    deleteEvent: event => {\n      return props.mutate({\n        variables: {\n          id: event.id\n        },\n        optimisticResponse: () => ({\n          deleteEvent: { ...event,\n            __typename: 'Event',\n            comments: {\n              __typename: 'CommentConnection',\n              items: []\n            }\n          }\n        })\n      });\n    }\n  })\n}))(AllEvents));","map":{"version":3,"sources":["/Users/poprahul/workspace/frontend/amplify-apps/calandarApp/aws-mobile-appsync-events-starter-react/src/Components/AllEvents.js"],"names":["React","Component","Link","graphql","compose","withApollo","QueryAllEvents","MutationDeleteEvent","moment","AllEvents","state","busy","handleSync","client","props","query","setState","fetchPolicy","renderEvent","event","id","name","when","format","where","description","comments","items","length","handleDeleteClick","bind","e","preventDefault","window","confirm","deleteEvent","render","events","concat","sort","a","b","localeCompare","map","defaultProps","options","data","listEvents","update","proxy","readQuery","filter","writeQuery","mutate","variables","optimisticResponse","__typename"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { graphql, compose, withApollo } from \"react-apollo\";\nimport QueryAllEvents from \"../GraphQL/QueryAllEvents\";\nimport MutationDeleteEvent from \"../GraphQL/MutationDeleteEvent\";\n\nimport moment from \"moment\";\n\nclass AllEvents extends Component {\n\n    state = {\n        busy: false,\n    }\n\n    static defaultProps = {\n        events: [],\n        deleteEvent: () => null,\n    }\n\n    async handleDeleteClick(event, e) {\n        e.preventDefault();\n\n        if (window.confirm(`Are you sure you want to delete event ${event.id}`)) {\n            const { deleteEvent } = this.props;\n\n            await deleteEvent(event);\n        }\n    }\n\n    handleSync = async () => {\n        const { client } = this.props;\n        const query = QueryAllEvents;\n\n        this.setState({ busy: true });\n\n        await client.query({\n            query,\n            fetchPolicy: 'network-only',\n        });\n\n        this.setState({ busy: false });\n    }\n\n    renderEvent = (event) => (\n        <Link to={`/event/${event.id}`} className=\"card\" key={event.id}>\n            <div className=\"content\">\n                <div className=\"header\">{event.name}</div>\n            </div>\n            <div className=\"content\">\n                <p><i className=\"icon calendar\"></i>{moment(event.when).format('LL')}</p>\n                <p><i className=\"icon clock\"></i>{moment(event.when).format('LT')}</p>\n                <p><i className=\"icon marker\"></i>{event.where}</p>\n            </div>\n            <div className=\"content\">\n                <div className=\"description\"><i className=\"icon info circle\"></i>{event.description}</div>\n            </div>\n            <div className=\"extra content\">\n                <i className=\"icon comment\"></i> {event.comments.items.length} comments\n            </div>\n            <button className=\"ui bottom attached button\" onClick={this.handleDeleteClick.bind(this, event)}>\n                <i className=\"trash icon\"></i>\n                Delete\n            </button>\n        </Link>\n    );\n\n    render() {\n        const { busy } = this.state;\n        const { events } = this.props;\n\n        return (\n            <div>\n                <div className=\"ui clearing basic segment\">\n                    <h1 className=\"ui header left floated\">All Events</h1>\n                    <button className=\"ui icon left basic button\" onClick={this.handleSync} disabled={busy}>\n                        <i aria-hidden=\"true\" className={`refresh icon ${busy && \"loading\"}`}></i>\n                        Sync with Server\n                    </button>\n                </div>\n                <div className=\"ui link cards\">\n                    <div className=\"card blue\">\n                        <Link to=\"/newEvent\" className=\"new-event content center aligned\">\n                            <i className=\"icon add massive\"></i>\n                            <p>Create new event</p>\n                        </Link>\n                    </div>\n                    {[].concat(events).sort((a, b) => a.when.localeCompare(b.when)).map(this.renderEvent)}\n                </div>\n            </div>\n        );\n    }\n\n}\n\nexport default withApollo(compose(\n    graphql(\n        QueryAllEvents,\n        {\n            options: {\n                fetchPolicy: 'cache-first',\n            },\n            props: ({ data: { listEvents = { items: [] } } }) => ({\n                events: listEvents.items\n            })\n        }\n    ),\n    graphql(\n        MutationDeleteEvent,\n        {\n            options: {\n                update: (proxy, { data: { deleteEvent } }) => {\n                    const query = QueryAllEvents;\n                    const data = proxy.readQuery({ query });\n\n                    data.listEvents.items = data.listEvents.items.filter(event => event.id !== deleteEvent.id);\n\n                    proxy.writeQuery({ query, data });\n                }\n            },\n            props: (props) => ({\n                deleteEvent: (event) => {\n                    return props.mutate({\n                        variables: { id: event.id },\n                        optimisticResponse: () => ({\n                            deleteEvent: {\n                                ...event, __typename: 'Event', comments: { __typename: 'CommentConnection', items: [] }\n                            }\n                        }),\n                    });\n                }\n            })\n        }\n    )\n)(AllEvents));\n"]},"metadata":{},"sourceType":"module"}