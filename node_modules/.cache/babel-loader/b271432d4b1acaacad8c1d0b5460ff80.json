{"ast":null,"code":"\"use strict\";\n\nfunction Cache(options) {\n  this.map = new Map();\n  this.newest = null;\n  this.oldest = null;\n  this.max = options && options.max;\n  this.dispose = options && options.dispose;\n}\n\nexports.Cache = Cache;\nvar Cp = Cache.prototype;\n\nCp.has = function (key) {\n  return this.map.has(key);\n};\n\nCp.get = function (key) {\n  var entry = getEntry(this, key);\n  return entry && entry.value;\n};\n\nfunction getEntry(cache, key) {\n  var entry = cache.map.get(key);\n\n  if (entry && entry !== cache.newest) {\n    var older = entry.older;\n    var newer = entry.newer;\n\n    if (newer) {\n      newer.older = older;\n    }\n\n    if (older) {\n      older.newer = newer;\n    }\n\n    entry.older = cache.newest;\n    entry.older.newer = entry;\n    entry.newer = null;\n    cache.newest = entry;\n\n    if (entry === cache.oldest) {\n      cache.oldest = newer;\n    }\n  }\n\n  return entry;\n}\n\nCp.set = function (key, value) {\n  var entry = getEntry(this, key);\n\n  if (entry) {\n    return entry.value = value;\n  }\n\n  entry = {\n    key: key,\n    value: value,\n    newer: null,\n    older: this.newest\n  };\n\n  if (this.newest) {\n    this.newest.newer = entry;\n  }\n\n  this.newest = entry;\n  this.oldest = this.oldest || entry;\n  this.map.set(key, entry);\n  return entry.value;\n};\n\nCp.clean = function () {\n  if (typeof this.max === \"number\") {\n    while (this.oldest && this.map.size > this.max) {\n      this.delete(this.oldest.key);\n    }\n  }\n};\n\nCp.delete = function (key) {\n  var entry = this.map.get(key);\n\n  if (entry) {\n    if (entry === this.newest) {\n      this.newest = entry.older;\n    }\n\n    if (entry === this.oldest) {\n      this.oldest = entry.newer;\n    }\n\n    if (entry.newer) {\n      entry.newer.older = entry.older;\n    }\n\n    if (entry.older) {\n      entry.older.newer = entry.newer;\n    }\n\n    this.map.delete(key);\n\n    if (typeof this.dispose === \"function\") {\n      this.dispose(key, entry.value);\n    }\n\n    return true;\n  }\n\n  return false;\n};","map":{"version":3,"sources":["/Users/poprahul/workspace/frontend/amplify-apps/calandarApp/aws-mobile-appsync-events-starter-react/node_modules/optimism/lib/cache.js"],"names":["Cache","options","map","Map","newest","oldest","max","dispose","exports","Cp","prototype","has","key","get","entry","getEntry","value","cache","older","newer","set","clean","size","delete"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction Cache(options) {\n  this.map = new Map;\n  this.newest = null;\n  this.oldest = null;\n  this.max = options && options.max;\n  this.dispose = options && options.dispose;\n}\n\nexports.Cache = Cache;\n\nvar Cp = Cache.prototype;\n\nCp.has = function (key) {\n  return this.map.has(key);\n};\n\nCp.get = function (key) {\n  var entry = getEntry(this, key);\n  return entry && entry.value;\n};\n\nfunction getEntry(cache, key) {\n  var entry = cache.map.get(key);\n  if (entry &&\n      entry !== cache.newest) {\n    var older = entry.older;\n    var newer = entry.newer;\n\n    if (newer) {\n      newer.older = older;\n    }\n\n    if (older) {\n      older.newer = newer;\n    }\n\n    entry.older = cache.newest;\n    entry.older.newer = entry;\n\n    entry.newer = null;\n    cache.newest = entry;\n\n    if (entry === cache.oldest) {\n      cache.oldest = newer;\n    }\n  }\n\n  return entry;\n}\n\nCp.set = function (key, value) {\n  var entry = getEntry(this, key);\n  if (entry) {\n    return entry.value = value;\n  }\n\n  entry = {\n    key: key,\n    value: value,\n    newer: null,\n    older: this.newest\n  };\n\n  if (this.newest) {\n    this.newest.newer = entry;\n  }\n\n  this.newest = entry;\n  this.oldest = this.oldest || entry;\n\n  this.map.set(key, entry);\n\n  return entry.value;\n};\n\nCp.clean = function () {\n  if (typeof this.max === \"number\") {\n    while (this.oldest &&\n           this.map.size > this.max) {\n      this.delete(this.oldest.key);\n    }\n  }\n};\n\nCp.delete = function (key) {\n  var entry = this.map.get(key);\n  if (entry) {\n    if (entry === this.newest) {\n      this.newest = entry.older;\n    }\n\n    if (entry === this.oldest) {\n      this.oldest = entry.newer;\n    }\n\n    if (entry.newer) {\n      entry.newer.older = entry.older;\n    }\n\n    if (entry.older) {\n      entry.older.newer = entry.newer;\n    }\n\n    this.map.delete(key);\n\n    if (typeof this.dispose === \"function\") {\n      this.dispose(key, entry.value);\n    }\n\n    return true;\n  }\n\n  return false;\n};\n"]},"metadata":{},"sourceType":"script"}