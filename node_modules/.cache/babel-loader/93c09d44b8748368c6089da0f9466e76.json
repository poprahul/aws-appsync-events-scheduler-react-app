{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar subscription_handshake_link_1 = require(\"./subscription-handshake-link\");\n\nexports.CONTROL_EVENTS_KEY = subscription_handshake_link_1.CONTROL_EVENTS_KEY;\n\nvar apollo_link_1 = require(\"apollo-link\");\n\nvar apollo_link_http_1 = require(\"apollo-link-http\");\n\nvar apollo_utilities_1 = require(\"apollo-utilities\");\n\nvar non_terminating_link_1 = require(\"./non-terminating-link\");\n\nvar realtime_subscription_handshake_link_1 = require(\"./realtime-subscription-handshake-link\");\n\nfunction createSubscriptionHandshakeLink(infoOrUrl, theResultsFetcherLink) {\n  var resultsFetcherLink, subscriptionLinks;\n\n  if (typeof infoOrUrl === \"string\") {\n    resultsFetcherLink = theResultsFetcherLink || apollo_link_http_1.createHttpLink({\n      uri: infoOrUrl\n    });\n    subscriptionLinks = apollo_link_1.ApolloLink.from([new non_terminating_link_1.NonTerminatingLink(\"controlMessages\", {\n      link: new apollo_link_1.ApolloLink(function (operation, _forward) {\n        return new apollo_link_1.Observable(function (observer) {\n          var _a;\n\n          var _b = operation.variables,\n              _c = subscription_handshake_link_1.CONTROL_EVENTS_KEY,\n              controlEvents = _b[_c],\n              variables = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n          if (typeof controlEvents !== \"undefined\") {\n            operation.variables = variables;\n          }\n\n          observer.next((_a = {}, _a[subscription_handshake_link_1.CONTROL_EVENTS_KEY] = controlEvents, _a));\n          return function () {};\n        });\n      })\n    }), new non_terminating_link_1.NonTerminatingLink(\"subsInfo\", {\n      link: resultsFetcherLink\n    }), new subscription_handshake_link_1.SubscriptionHandshakeLink(\"subsInfo\")]);\n  } else {\n    var url = infoOrUrl.url;\n    resultsFetcherLink = theResultsFetcherLink || apollo_link_http_1.createHttpLink({\n      uri: url\n    });\n    subscriptionLinks = new realtime_subscription_handshake_link_1.AppSyncRealTimeSubscriptionHandshakeLink(infoOrUrl);\n  }\n\n  return apollo_link_1.ApolloLink.split(function (operation) {\n    var query = operation.query;\n\n    var _a = apollo_utilities_1.getMainDefinition(query),\n        kind = _a.kind,\n        graphqlOperation = _a.operation;\n\n    var isSubscription = kind === \"OperationDefinition\" && graphqlOperation === \"subscription\";\n    return isSubscription;\n  }, subscriptionLinks, resultsFetcherLink);\n}\n\nexports.createSubscriptionHandshakeLink = createSubscriptionHandshakeLink;","map":{"version":3,"sources":["/Users/poprahul/workspace/frontend/amplify-apps/calandarApp/aws-mobile-appsync-events-starter-react/node_modules/aws-appsync-subscription-link/lib/index.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","defineProperty","exports","value","subscription_handshake_link_1","require","CONTROL_EVENTS_KEY","apollo_link_1","apollo_link_http_1","apollo_utilities_1","non_terminating_link_1","realtime_subscription_handshake_link_1","createSubscriptionHandshakeLink","infoOrUrl","theResultsFetcherLink","resultsFetcherLink","subscriptionLinks","createHttpLink","uri","ApolloLink","from","NonTerminatingLink","link","operation","_forward","Observable","observer","_a","_b","variables","_c","controlEvents","next","SubscriptionHandshakeLink","url","AppSyncRealTimeSubscriptionHandshakeLink","split","query","getMainDefinition","kind","graphqlOperation","isSubscription"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar subscription_handshake_link_1 = require(\"./subscription-handshake-link\");\nexports.CONTROL_EVENTS_KEY = subscription_handshake_link_1.CONTROL_EVENTS_KEY;\nvar apollo_link_1 = require(\"apollo-link\");\nvar apollo_link_http_1 = require(\"apollo-link-http\");\nvar apollo_utilities_1 = require(\"apollo-utilities\");\nvar non_terminating_link_1 = require(\"./non-terminating-link\");\nvar realtime_subscription_handshake_link_1 = require(\"./realtime-subscription-handshake-link\");\nfunction createSubscriptionHandshakeLink(infoOrUrl, theResultsFetcherLink) {\n    var resultsFetcherLink, subscriptionLinks;\n    if (typeof infoOrUrl === \"string\") {\n        resultsFetcherLink =\n            theResultsFetcherLink || apollo_link_http_1.createHttpLink({ uri: infoOrUrl });\n        subscriptionLinks = apollo_link_1.ApolloLink.from([\n            new non_terminating_link_1.NonTerminatingLink(\"controlMessages\", {\n                link: new apollo_link_1.ApolloLink(function (operation, _forward) {\n                    return new apollo_link_1.Observable(function (observer) {\n                        var _a;\n                        var _b = operation.variables, _c = subscription_handshake_link_1.CONTROL_EVENTS_KEY, controlEvents = _b[_c], variables = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n                        if (typeof controlEvents !== \"undefined\") {\n                            operation.variables = variables;\n                        }\n                        observer.next((_a = {}, _a[subscription_handshake_link_1.CONTROL_EVENTS_KEY] = controlEvents, _a));\n                        return function () { };\n                    });\n                })\n            }),\n            new non_terminating_link_1.NonTerminatingLink(\"subsInfo\", { link: resultsFetcherLink }),\n            new subscription_handshake_link_1.SubscriptionHandshakeLink(\"subsInfo\")\n        ]);\n    }\n    else {\n        var url = infoOrUrl.url;\n        resultsFetcherLink = theResultsFetcherLink || apollo_link_http_1.createHttpLink({ uri: url });\n        subscriptionLinks = new realtime_subscription_handshake_link_1.AppSyncRealTimeSubscriptionHandshakeLink(infoOrUrl);\n    }\n    return apollo_link_1.ApolloLink.split(function (operation) {\n        var query = operation.query;\n        var _a = apollo_utilities_1.getMainDefinition(query), kind = _a.kind, graphqlOperation = _a.operation;\n        var isSubscription = kind === \"OperationDefinition\" && graphqlOperation === \"subscription\";\n        return isSubscription;\n    }, subscriptionLinks, resultsFetcherLink);\n}\nexports.createSubscriptionHandshakeLink = createSubscriptionHandshakeLink;\n"]},"metadata":{},"sourceType":"script"}